@(taskTypes: List[models.task.TaskType], dataSets: List[models.binary.DataSet], projects: List[models.task.Project], teams: List[String], nmlForm: Form[_], taskForm: Form[_])(implicit session: oxalis.view.AuthedSessionData)

@main(){
  <div class="container task-types-administration">
    <div class="row">
      <div class="col-md-6">
        <div class="well">
          <h3>Create Task from explorative SkeletonTracing</h3>
          Every nml creates a new task. You can either upload a single NML file or a zipped collection of nml files (.zip).<br /><br />
          @helper.form(controllers.admin.routes.TaskAdministration.createFromNML, 'class -> "form-horizontal", 'enctype -> "multipart/form-data") {

            @basicTaskForm(nmlForm, taskTypes, projects, teams)

            @helper.inputText(taskForm("boundingBox.box"), 'type -> "text", 'class -> "form-control")

            <div class="form-group">
              <label class="col-sm-3 control-label" for="nmlFile">@Messages("nmlFile")</label>
              <div class="col-sm-9">
                <div class="input-group">
                  <span class="input-group-btn">
                    <span class="btn btn-primary btn-file">
                      Browse… <input type="file" multiple="" name="nmlFile">
                    </span>
                  </span>
                  <input type="text" class="file-info form-control" readonly="">
                </div>
              </div>
            </div>

            <script type="text/javascript">
              require(["jquery"], function($) {
                $("input[type=file]").on("change", function(evt){
                  var files = this.files;
                  if (files) {
                    var fileNames = [];
                    for (var i=0; i < this.files.length; i++)
                        fileNames.push(files[i].name)
                    $(".file-info").val(fileNames.join(", "))                  }
                })
              })
            </script>

            <div class="form-group">
              <div class="col-sm-9 col-sm-offset-3">
                <button type="submit" class="form-control btn btn-primary">Create</button>
              </div>
            </div>
          }
        </div>
        </div>

        <div class="col-md-6">
        <div class="well">
          <h3>Create Task</h3>
          @helper.form(controllers.admin.routes.TaskAdministration.createFromForm, 'class -> "form-horizontal") {

            @basicTaskForm(nmlForm, taskTypes, projects, teams)

            @helper.select(taskForm("dataSet"), dataSets.map { dataSet =>
              dataSet.name -> dataSet.name
            }, 'class -> "form-control")

            @helper.inputText(taskForm("start.point"), 'type -> "text", 'class -> "form-control")

            @helper.inputText(taskForm("rotation.vector"), 'type -> "text", 'class -> "form-control")

            @helper.inputText(taskForm("boundingBox.box"), 'type -> "text", 'class -> "form-control")

            @helper.checkbox(taskForm("isForAnonymous"))

            <div class="form-group">
              <div class="col-sm-9 col-sm-offset-3">
                <button type="submit" class="form-control btn btn-primary">Create</button>
              </div>
            </div>
          }
        </div>
      </div>
    </div>


    <div class="row">
      <div class="col-sm-12">
        <div class="well">
          <h3>Import Tasks in Bulk</h3>
          One line for each task. The values are seperated by ','. Format: <br />
          dataSet, taskTypeSummary, experienceDomain, minExperience, x, y, z, priority, instances, team, minX, minY, minZ, maxX, maxY, maxZ, (opt: project)<br /><br />
          @helper.form(controllers.admin.routes.TaskAdministration.createBulk, 'class -> "form-horizontal"){
            <div class="form-group">
              <div class="col-sm-12">
                <textarea class="form-control input-monospace" rows="20" name="data"></textarea>
              </div>
            </div>
            <div class="form-group">
              <div class="col-sm-offset-10 col-sm-2">
                <button type="submit" class="form-control btn btn-primary">Import</button>
              </div>
            </div>
          }
        </div>
      </div>
    </div>

  </div>
}
